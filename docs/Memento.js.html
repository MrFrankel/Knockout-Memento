<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Memento.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: Memento.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>ï»¿/**
 * @MementoStackFactory is the creator and manager for mementos stacks, it is responsible for creating stacks, destroying them and also acts as an entry point to the
 * @author Maor Frankel
 * @version 1.0.0
 * @constructor
 */
ko.msf.mStack.Memento = function (contex,subject, value) {
    var context = contex || (function () { }); //Set subject or set default empty function(because we deal with observable default must be dummy function)


    var notifySubscribers = function(cbs){
        if(cbs instanceof  Array){ // in case no subscribers have been passed
            cbs.forEach(function(cb){
                cb({
                    context:context,
                    subject:subject,
                    value:value
                });
            });
        }
    };

    /**
     * Trigger this memento
     * @param cbs array of subscribers
     * @returns {*} the result of clearForGc();
     */
    this.trigger = function(cbs) {
        notifySubscribers(cbs);
        subject(value);
        return this.clearForGc();

    };
    
   /**
   * Create a duplicate object with same subject and current subject value
   *@return duplicate memento containing subject current value
   **/
    this.duplicate = function () {
        return (new ko.msf.mStack.Memento(context, subject, subject()));

    };
    /**
    * Clear all references so object is collected
    **/
    this.clearForGc = function () {
      subject = undefined;
      value = undefined;
      context = undefined;
      for (var property in this) {
           if (this.hasOwnProperty(property)) {
               this[property] = undefined;
           }
       }
        return true;
    };
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="ko.msf.ErrorHandler.html">ErrorHandler</a></li><li><a href="ko.msf.mStack.html">mStack</a></li><li><a href="ko.msf.mStack.Memento.html">Memento</a></li></ul><h3>Namespaces</h3><ul><li><a href="ko.html">ko</a></li><li><a href="ko.msf.html">msf</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Tue Jan 07 2014 10:47:29 GMT+0200 (IST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
